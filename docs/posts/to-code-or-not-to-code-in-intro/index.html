<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-99.9.9">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Russ Poldrack">
<meta name="dcterms.date" content="2018-03-25">

<title>Russ Poldrack’s blog - To Code or Not to Code (in intro statistics)?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-R0530E6SNQ"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-R0530E6SNQ', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Russ Poldrack’s blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://profiles.stanford.edu/russell-poldrack" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/poldrack" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://mastodon.online/@Russpoldrack" rel="" target=""><i class="bi bi-mastodon" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">To Code or Not to Code (in intro statistics)?</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Russ Poldrack </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 25, 2018</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p><em>This was originally posted on blogger <a href="https://russpoldrack.blogspot.com/2018/03/to-code-or-not-to-code-in-intro.html">here</a></em>.</p>
<p>Last week we wrapped <a href="http://psych10.github.io/">Stats 60/Psych 10</a>, which was the first time I have ever taught such a course. One of the goals of the course was for the students to develop enough data analysis skill in R to be able to go off and do their own analyses, and it seems that we were fairly successful in this. To quantify our performance I used data from an entrance survey (which asked about previous programming experience) and an exit survey (which asked about self-rated R skill on a 1-7 scale). Here are the data from the exit survey, separated by whether the students had any previous programming experience:This shows us that there are now about fifty Stanford undergrads who had never programmed before and who now feel that they have at least moderate R ability (3 or above). Some comments on the survey question “What were your favorite aspects of the course?” also reflected this (these are all from people who had never programmed before):The emphasis on learning R was valuable because I feel that I’ve gained an important skill that will be useful for the rest of my college career.I feel like I learned a valuable skill on how to use RGradually learning and understanding coding syntax in RFinally getting code right in R is a very rewarding feelingSense of accomplishment I got from understanding the R material on my ownAt the same time, there was a substantial contingent of the class that did not like the coding component. This was evident to some comments on the survey question “What were your least favorite aspects of the course?”:R coding. It is super difficult to learn as a person with very little coding background, and made this class feel like it was mostly about figuring out code rather than about absorbing and learning to apply statistics.My feelings are torn on R. I understand that it’s a useful skill &amp; plan to continue learning it after the course (yay DataCamp), but I also found it extremely frustrating &amp; wouldn’t have sought it out to learn on my own.I had never coded before, nor have I ever taken a statistics course. For me, trying to learn these concepts together was difficult. I felt like I went into office hours for help on coding, rather than statistical concepts.One of the major challenges of the quarter system is that we only have 10 weeks to cover a substantial amount of material, which has left me asking myself whether it is worth it to teach students to analyze data in R, or whether I should instead use one of the newer open-source graphical statsitics packages, such as <a href="https://jasp-stats.org/">JASP</a> or <a href="https://www.jamovi.org/">Jamovi</a>. The main pro that I see of moving to a graphical package are that the students could spend more time focusing on statistical concepts, and less time trying to understand R programming constructs like pipes and ggplot aesthetics that have little to do with statistics per se. On the other hand, there are the several reasons that I decided to teach the course using R in the first place:Many of the students in the class come from humanities departments where they would likely never have a chance to learn coding. I consider computational literacy (including coding) to be essential for any student today (regardless of whether they are from sciences or the humanities), and this course provides those students with a chance to acquire at least a bit of skill and hopefully inspires curiosity to learn more.Analyzing data by pointing and clicking is inherently non-reproducible, and one of the important aspects of the course was to focus the students on the importance of reproducible research practices (e.g.&nbsp;by having them submit RMarkdown notebooks for the problem sets and final project). A big part of working with real data is wrangling the data into a form where the statistics can actually be applied. Without the ability to code, this becomes much more difficult.The course focuses a lot on simulation and randomization, and I’m not sure that the interactive packages will be useful for instilling these concepts.I’m interested to hear your thoughts about this tradeoff: Is it better for the students to walk away with some R skill but less conceptual statistical knowledge, or greater conceptual knowledge without the ability to implement it in code? Please leave your thoughts in the comments below.</p>
<hr>
<section id="comments-captured-from-original-post-on-blogger" class="level2">
<h2 class="anchored" data-anchor-id="comments-captured-from-original-post-on-blogger">14 comments captured from <a href="https://russpoldrack.blogspot.com/2018/03/to-code-or-not-to-code-in-intro.html">original post</a> on Blogger</h2>
<p><strong>daniele said on 2018-03-25</strong></p>
<p>I would say definitely code, making it part of the learning process.<br>Students might be scared when they see code and think they might be evaluated on coding, but unfortunately tend to discard the coding part if it’s not explicit part of the evaluation, and it’s a pity.<br>So I would make it clear from the start that coding is part of the training, and functional to improve the learning, and to express what was learned.</p>
<p><strong>Russ Poldrack said on 2018-03-25</strong></p>
<p>thanks Daniele! That is how I tried to do it this time - though it’s clear from some of the comments that we didn’t do a good enough job integrating the coding content and statistical content.</p>
<p><strong>Mr.Rocks said on 2018-03-25</strong></p>
<p>&gt; trying to learn these concepts together was difficult<br><br>I don’t think teaching coding and statistics in one bundle is profitable to learn either. I totally agree that both need to be learned, and not coding these days is a kind of illiteracy. But just as I would not teach English and statistics in the same course, I wouldn’t do that to statistics. Either make basic coding skills a prerequisite for the statistics course, or teach statistic concepts in an abstract way without prerequisite and then later get to the applied stuff in a course that does require coding.<br><br>By the way, I learned to code in SPSS, then R. I only started making sense of R past Stack Overflow copy/paste after I learned Python, and I only made sense of code structure after I learned Haskell. Yes, doing stats provided the motivation to learn to code, but no, R is not a good language to learn coding concepts in.</p>
<p><strong>Russ Poldrack said on 2018-03-25</strong></p>
<p>thanks for the thoughts and the interesting analogy. requiring coding as a prereq is a non-starter for this course.</p>
<p><strong>Mr.Rocks said on 2018-03-25</strong></p>
<p>Then consider teaching statistics first. Learning works best when the novelty is confined to a single dimension. Or break the course into separate blocks, and teach one (either statistics or coding) in isolation first.</p>
<p><strong>Unknown said on 2018-03-25</strong></p>
<p>Unfortunately, the most positive evaluations go to easy-A classes that do not push students, down the road you’ll meet lots of students who say: that class was so hard, but I learnt statistics and how to do the <br> things I needed for this really cool project. You can’t judge a new car when you drive out the dealership, try asking in 3 years. …<br>(SherlockpHolmes)</p>
<p><strong>Russ Poldrack said on 2018-03-25</strong></p>
<p>The following thoughts were emailed by E.-J. Wagenmakers and are being posted with his consent:<br><br>Dear Russ,<br>My thoughts:<br>1. I love R, and I have no problems whatsoever with teaching students<br>R. Every student should learn how to code in R. It does seem to me<br>that it is a separate skill from stats, but then again, if you teach<br>stats through lots of simulations, there is no going around R.<br>2. "Analyzing data by pointing and clicking is inherently<br>non-reproducible" -&gt; I respectfully disagree. The JASP files store not<br>only the annotated output, but also store the input options that gave<br>rise to that output. So I can send you a jasp file and you will know<br><em>exactly</em> what I’ve done.<br>3. For me, as an R programmer, conducting an analysis in R takes<br>several orders of magnitude longer than doing it in JASP.<br>4. With JASP I know I am not making some sort of stupid programming mistake! This means I don’t have to debug my code. This is an clear advantage of GUIs that is missing from your list. Consider advising a student. You either get an analysis output from JASP, or from the student’s own R code. Which result do you trust?<br>5. Two years later, will the students still program in R? Or will they<br>be sick of having to load the package you need for an ANOVA ("wait, we also needed to code some stuff as factors, right?"). Or will they have forgotten most of it?<br>6. I don’t think the choice between R and JASP is an either-or situation.<br>7. Let me stress again how much I like R, and how much I appreciate<br>the courses that teach R. It is a fabulous tool and, in fact, JASP<br>would not have been possible without R and its packages (see<br>https://jasp-stats.org/r-package-list/). Currently the JASP team is<br>working to achieve complete synergy with R; this is under development but we are excited about the possibilities for the future.<br>Cheers,<br>E.J.<br></p>
<p><strong>Sarah Chang said on 2018-03-25</strong></p>
<p>Hi there! (Disclaimer: mostly anec data to follow)<br><br>As a post-bach RA in a clinical neuroscience lab aiming to pursue a PhD in Psych/Neuroscience, I wish that I had gotten coding experience during undergrad. I majored in Psychobiology (no coding required for my major) at UCLA, and I feel like I’m playing catch up since coding is pretty essential for fMRI paradigms/processing pipelines/analysis. <br><br>After consulting with my roommates (both previous Econ majors who now work in the business side of tech), they believe that coding/data wrangling is also critical for success in their futures, so regardless of the field, learning R would be valuable to all of us. We’re currently enrolled in online coding classes (Python, SQL, Javascript) through UCLA’s extension program. <br><br>Personally, I think that integrating stats and coding is parsimonious. I also learned SPSS first in undergrad, then R post grad. There were definitely headbanging moments while learning R, but I wish I could’ve began to learn it in my first psych stats course despite only having 10 weeks to do so.<br><br>Best wishes,<br>Sarah C.</p>
<p><strong>deevybee said on 2018-03-25</strong></p>
<p>I strongly believe that the best way to give people an intuitive understanding of statistics is by getting them to simulate data and then run analysis. If you do this, you see a light go on as they get, for the first time, what a p-value is and why p-hacking is serious. It’s also good for getting a grip on just how seriously sample size affects power. Therefore i’d go for teaching via R, but it’s all about how you do that. I’d say that if beginners are being exposed to ggplot2 and pipes, then you’re doing it wrong. The R needs to be as simple as is compatible with the statistics you are learning, with exercises that they can work through one line at a time: then they can run the code, look at the output, tweak the code, see what happens If they are natural coders, you can point them to books that will explain how to write elegant scripts, but I think for ease of understanding, clunky scripts can be better. I’m trying to develop teaching scripts myself and always interested in feedback: see https://github.com/oscci/deevybee_repo.</p>
<p><strong>Russ Poldrack said on 2018-03-26</strong></p>
<p>Thanks Dorothy! I agree regarding ggplot - its API has a seriously steep learning curve, though it is quite powerful once you learn how to use it. regarding pipes, I think there are things that are made so easy by the tidyverse (e.g.&nbsp;grouping and summarizing) that would be a lot more work without it. I was also swayed by the arguments here: http://varianceexplained.org/r/teach-tidyverse/</p>
<p><strong>David said on 2018-03-26</strong></p>
<p>I would not base any decisions on these kinds of data—even tentatively. Self-efficacy is a terrible predictor of performance (Dunning-Kruger, etc.). Both the quantitative and qualitative data reflect the impact of prior knowledge on confidence, which is a very different hypothetical than coding with R enhances statistics learning outcomes. Also, if we care about diversification of STEM fields for which statistics is an entry point, orienting a course toward coding will give an increased confidence advantage to people with prior computing backgrounds at the expense of those without. Those individuals with these backgrounds are vastly more likely to be white, male, and from upper SES ranges. Those without are the people whom we struggle to bring into computationally intensive fields.<br><br>Sorry to be a downer.</p>
<p><strong>Russ Poldrack said on 2018-03-26</strong></p>
<p>Thanks David, great points. Just a couple of comments:<br>- I realize that self-rated skill is not a great predictor of actual performance, but in some ways I am just as interested in self-efficacy here as I am in actual skill. no one is going to become a highly skilled R programmer after just 10 weeks, but if they feel like they have some base skill on which they can build then they are more likely to pursue additional training in the future. <br>- Your points about diversity are well taken, but there is another way to view it: we are offering a course that introduces coding to a set of people who otherwise would likely never have encountered it (since this class is heavily populated with individuals from arts and humanities). If we can get some of them interested in using statistics and computing in their home disciplines (which was the goal of our class project), then I would consider that a win because it would almost certainly be reaching some of those people who had self-selected against computational majors. I have to look at the bright side…</p>
<p><strong>Jonathon said on 2018-03-27</strong></p>
<p>hi russ,<br><br>just thought i’d comment on this:<br><br>&gt; Analyzing data by pointing and clicking is inherently non-reproducible<br><br>i don’t think this is true. in jamovi all the options you use to run an analysis, the data used, and the results are all bundled together in the same file. you can click on an earlier analysis, and see the options which were used. better, you can send a file to a colleague, they can open the file, and see what options you used. this makes reproducibility so simple, and people do it without even realising.<br><br>i’d also mention that jamovi includes an ‘R syntax mode’, where it will output the equivalent R syntax. this lets you copy/paste it into R studio or the like. in this way, jamovi is a great way to ease people into using R.<br><br>check it out<br><br>jonathon<br></p>
<p><strong>Unknown said on 2018-03-28</strong></p>
<p>My first question would be demographics not only majors in Liberal Arts etc but Elective or non-elective: Grad or undergrad. What are students hoping to get out of the course. Statistics and programming (both) are complementary skills for a wide variety jobs. A self-rating might imply a correlation for what students hoped to gain from electing the course. I would also not assume SES or class as a stronger correlation for learning than choice and other motivations on what the students hope to get out of the course so offering basic skills and self-rating indicate an appreciation to both fields they may pursue further. A worthy statistical objective.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>