<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-99.9.9">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Russ Poldrack">
<meta name="dcterms.date" content="2022-11-01">

<title>Russ Poldrack’s blog - Teaching the Psychology of the Climate Crisis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-R0530E6SNQ"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-R0530E6SNQ', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Russ Poldrack’s blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://profiles.stanford.edu/russell-poldrack" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/poldrack" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://mastodon.online/@Russpoldrack" rel="" target=""><i class="bi bi-mastodon" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Teaching the Psychology of the Climate Crisis</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Russ Poldrack </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 1, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="teaching-the-psychology-of-the-climate-crisis" class="level2">
<h2 class="anchored" data-anchor-id="teaching-the-psychology-of-the-climate-crisis">Teaching the Psychology of the Climate Crisis</h2>
<blockquote class="blockquote">
<p>“It is now incontrovertible that human behavior has led to significant changes in the Earth’s climate, and that these changes will inflict an increasingly significant toll on human wellbeing if they are not reversed. It is also clear that both the opportunities and obstacles to the needed changes are largely psychological and behavioral.”</p>
</blockquote>
<p>So began the syllabus for a course that Noah Goodman and I taught together in the Spring Quarter of 2023 at Stanford, titled “Psychology of the Climate Crisis”. Noah and I had discussed teaching such a class for several years, and finally had the chance to do it this year. The group of students in the class ended up being quite small, with four undergradates, two Master’s students, and two PhD students, hailing from six different departments across the university. Fortunately, these were amongst the most engaged and dedicated students that I have ever taught in my entire career. The small size of the class also allowed us to get to know the students very well and give them more agency in designing the class.</p>
<p>The goal of this post is to catalog our experiences in teaching this class, in hopes that they might inspire others to teach similar courses.</p>
</section>
<section id="syllabus" class="level2">
<h2 class="anchored" data-anchor-id="syllabus">Syllabus</h2>
<p>Since neither Noah nor myself had any expertise in climate psychology, we decided to work together with the students to put together the syllabus; in essence they got to experience the same kind of educational journey that we did. The overall structure and set of topics that we ultimately covered was decided in the first class session, based on a starting set of topics derived primarily from our reading of the <a href="https://www.uvm.edu/~vtstclim/Documents/pdfs/climate-change.pdf">2009 APA Report on Psychology and Global Climate Change</a>.</p>
<p>The other major event of the first week was a talk to the class by <a href="https://aronlab.org/">Adam Aron</a>, who happened to be visiting campus that week. Adam has been at the forefront of advocacy around the climate crisis, and has recently written a very nice <a href="https://aronclimatecrisis.net/">book</a> on the topic, which includes a substantial amount of discussion around relevant psychological issues.</p>
<p>The first session of each week (Tuesday) was dedicated to student-led discussion of papers regarding the week’s subtopic. The students were also responsible for selecting the papers. Because of the small number of students in the class, we assigned the leadership of the discussion each Tuesday to one or two students. The second session each week was dedicated to working on the final project (discussed below) or to wide-ranging discussions of relevant topics.</p>
<table class="table">
<thead>
<tr class="header">
<th>Week</th>
<th>Topic</th>
<th>Readings</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Overview and introductory talk by Adam Aron</td>
<td></td>
</tr>
<tr class="even">
<td>2</td>
<td>Perceiving and understanding risk and uncertainty</td>
<td><a href="https://link.springer.com/article/10.1007/s10584-006-9060-3">Weber (2006)</a>, <a href="https://www.nature.com/articles/nclimate2093">Zaval et al., 2014)</a></td>
</tr>
<tr class="odd">
<td>3</td>
<td>Intertemporal choice and future-oriented thinking</td>
<td><a href="https://www.frontiersin.org/articles/10.3389/fpsyg.2020.568899/full">Maiella et al.&nbsp;(2020)</a>, <a href="https://www.researchgate.net/publication/333001860_The_Moderating_Role_of_Cultural_Background_in_Temporal_Framing_Focusing_on_Climate_Change_Awareness_Advertising">Kim &amp; Ahn (2019)</a></td>
</tr>
<tr class="even">
<td>4</td>
<td>Beliefs about climate change: Susceptibility to misinformation and motivated reasoning</td>
<td><a href="https://www.nature.com/articles/s41558-018-0360-1">Druckman &amp; McGrath (2019)</a>, <a href="https://journals.sagepub.com/doi/abs/10.1177/0093650211416646?journalCode=crxa">Hart &amp; Nisbet (2012)</a></td>
</tr>
<tr class="odd">
<td>5</td>
<td>Behavior change</td>
<td><a href="https://www.sciencedirect.com/science/article/pii/S0272494415300190">Bamberg et al.&nbsp;(2015)</a>, <a href="https://www.cambridge.org/core/journals/behavioural-public-policy/article/identifying-the-most-important-predictors-of-support-for-climate-policy-in-the-united-states/84A5C161B704056947AAC20A571C8CF9">Goldberg et al.&nbsp;(2020)</a></td>
</tr>
<tr class="even">
<td>6</td>
<td>Personal and group identity</td>
<td><a href="https://www.sciencedirect.com/science/article/pii/S2352154621000619">Doell et al (2021)</a>, <a href="https://www.mdpi.com/2225-1154/11/2/26">Grindal et. al (2023)</a></td>
</tr>
<tr class="odd">
<td>7</td>
<td>Cooperation and social norms</td>
<td><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8702189/">Latkin, et al.&nbsp;(2021)</a> , <a href="https://journals.sagepub.com/doi/epub/10.1177/15291006221105279">Constantino, et al.&nbsp;(2022)</a></td>
</tr>
<tr class="even">
<td>8</td>
<td>Collective behavior (game theory / networks)</td>
<td><a href="https://www.elgaronline.com/configurable/content/edcoll$002f9780857939050$002f9780857939050.00018.xml?t:ac=edcoll%24002f9780857939050%24002f9780857939050.00018.xml">Tavoni and Iris (2020)</a> , <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2155904">Diaz et al., (2012)</a></td>
</tr>
<tr class="odd">
<td>9</td>
<td>Psychological interventions to address climate change</td>
<td><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC10068847/">Bergquist et al.&nbsp;(2023)</a>, <a href="https://www.pnas.org/doi/10.1073/pnas.0908738106">Dietz et al.&nbsp;(2009)</a></td>
</tr>
<tr class="even">
<td>10</td>
<td>Wrapup</td>
<td></td>
</tr>
</tbody>
</table>
<p>With only ten weeks there were a number of topics that we were not able to cover. One important one, which is the focus of <a href="https://royalsocietypublishing.org/doi/10.1098/rsos.210006">recent work by Adam Aron and colleagues</a>, is the psychology of collective action; that is, what are the psychological factors that drive people to become involved in larger groups and ultimately to become activists. Another important topic that we didn’t touch upon is the psychological impacts of climate change, though this topic came up often in our discussions.</p>
</section>
<section id="class-project-an-open-source-book" class="level2">
<h2 class="anchored" data-anchor-id="class-project-an-open-source-book">Class project: An open-source book</h2>
<p>In planning the class I floated the somewhat off-the-wall idea of having the students work together to generate an open source e-book as their final project. I’ve done this <a href="https://openjdm.github.io/">once before</a> and thought the students found it quite fulfilling to generate a resource that will live beyond the end of the quarter.</p>
<p>In the first few weeks we discussed the chapter topics (which aligned roughly with the syllabus topics), and the students worked together to identify potential synergies and overlaps between their intended topics. In Week 5 students submitted a one-page topic proposal with proposed references, which were peer-reviewed by other students as well as by the instructors. An initial draft of the chapter was due in Week 8, which were also peer reviewed, and the final draft was due during Finals Week (Week 11). The chapters will be edited by the instructors over the summer and will be released as an <a href="https://climatecrisispsychology.github.io/">open-source book</a> later this summer.</p>
</section>
<section id="major-takeaways" class="level2">
<h2 class="anchored" data-anchor-id="major-takeaways">Major takeaways</h2>
<p>A first takeaway for me was reframing where I think the problem really lies. I went into the course thinking about climate change as primarily a problem of behavior change, just like the many other habits that I wrote about in my book, <a href="https://www.amazon.com/Hard-Break-Brains-Habits-Stick/dp/0691194327">Hard to Break</a>. I still think that the stickiness of behavior is a central problem, but I am less convinced that an understanding of the cognitive mechanisms underlying this stickiness is actually useful for understanding how to actually address the climate crisis. Instead, I have become increasingly convinced that the most important psychological levers are <em>social</em>, particularly regarding social norms. The paper from our syllabus by <a href="https://journals.sagepub.com/doi/epub/10.1177/15291006221105279">Constantino et al (2022)</a> lays this out nicely. This is also fairly clear from the meta-analysis of intervention effects by <a href="https://www.pnas.org/doi/10.1073/pnas.2214851120">Bergquist et al., 2023</a>, which showed that inerventions based on social comparison had the largest effects.</p>
<p>Second, I am less convinced after the class that psychological interventions are going to be an important part of the solution, even though psychological research is clearly important for understanding the important levers for intervention. This in part driven by the empirical evidence from the aforementoined large second-order meta-analysis by Berquist et al., (2023), which showed that the effects of psychological interventions were moderate at best, and became quite small after bias correction. More importantly, I think that making major changes in behavior is going to require large-scale social norm changes; in particular, in the context of the US, massive changes in behavior could occur relatively quickly if Republican leaders were to begin advocating for the importance of action to address the climate crisis and thus changing social norms within their community. Given the existing evidence regarding psychological interventions, it’s just not clear to me that they offer any hope on their own of addressing the climate crisis in the near term. I should note that the work on collective action that I mentioned above may provide useful interventions that could have larger impacts than those targeted at the individual.</p>
<p>If there is one important new concept that I learned in the class, it is <em>pluralistic ignorance</em>, which is the idea that a group of individuals can systematically misunderstand what others in their group believe. In the context of climate change, a compelling example comes from <a href="https://www.nature.com/articles/s41467-022-32412-y">Gregg Sparkman and colleagues</a>, who found:</p>
<blockquote class="blockquote">
<p>“80–90% of Americans underestimate the prevalence of support for major climate change mitigation policies and climate concern. While 66–80% Americans support these policies, Americans estimate the prevalence to only be between 37–43% on average. Thus, supporters of climate policies outnumber opponents two to one, while Americans falsely perceive nearly the opposite to be true.”</p>
</blockquote>
<p>It’s very clear that this kind of systematic misunderstanding is a serious impediment to any kind of climate action at the national level. Unfortunately it’s less clear how we fix this problem.</p>
<p>Noah raised another important takeaway: Climate change is a case study for “psychology in the wild” that helps bring together many different psychological issues that are often studied in different subfields. A few examples would include: behavioral decision making, game theory, intertemporal choice, belief updating, behavior change, and social norms. Thinking about the larger topic of climate change required bringing all of these together in a way that was quite illuminating for both of us.</p>
<p>Finally, I must mention the methodological issues within the literature that we read. Our class discussions of the readings tended heavily towards deep dives into the methodology of each study (perhaps not surprisingly given the instructors), and many of the empirical studies we examined had fairly significant methodological shortcomings. In a number of cases there were methodological choices made that were non-standard and not well motivated, which for me evokes a sense of p-hacking. In fact, there is evidence for at least some degree of p-hacking in this literature from the p-curve analysis presented by Bergquist et al in the meta-analysis. Figure D from Appendix B shows the bump in p-values just below .05 that would be expected if researchers were exploiting analytic variability in order to find a signficant effect:</p>
<p><img src="bergquist_pcurve.png" class="img-fluid"></p>
<p>It was also disappointing that few of the studies shared their data and none (to my memory) of the empirical studies we read were pre-registered. There was also a particularly heavy use of mediation analysis in this literature, which is problematic for reasons outlined by <a href="https://psyarxiv.com/paeb7/">Julia Rohrer and colleagues</a> (and recently described by Richard Mcelreath as a <a href="https://elevanth.org/blog/2023/06/14/some-dumpster-fires-for-your-consideration/">“dumpster fire”</a>). I hope that as methodological standards in the field increase that this area will come along, but at present the poor methodological standards in the published work make it difficult to form very strong conclusions.</p>
<p>I hope this overview is helpful for those of you who are thinking of teaching on the climate crisis. Despite the challenges that I outlined above, both of us found this to be a notably fulfilling teaching experience, due in large part to the passion that our students felt around the topic. I also hope that if you do research or teach on this topic that you will consider contributing to our open source book, to help make it a more robust resource for people interested in the topic.</p>
<p><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png"></a><br>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>